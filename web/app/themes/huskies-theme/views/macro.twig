{% macro icon(name) %}
  <svg class="icon icon--{{ name }}"><use xlink:href="#icon-{{ name }}"></use></svg>
{% endmacro %}

{% macro header_top_link(icon, link) %}
  {% from _self import icon %}

  <a class="header-nav__addition-button" href="{{ link }}">{{ icon(icon) }}</a>
{% endmacro %}

{% macro post_short(post) %}
  {% from _self import icon %}

  <article class="post_short {{ post.class }}" id="post-{{ post.ID }}">
    <h2 class="post_short__title clear">
      <a href="{{ post.permalink }}">{{ post.title }}</a>
      <div>
        <strong>{{ icon(function('get_post_format', post.ID)|humanize_type) }}</strong>
        <small>{{ post.display_date }}</small>
      </div>
    </h2>
    <a class="post_short__button button button--primary" href="{{ post.permalink }}">{{ __('More', 'huskies') }}</a>
  </article>
{% endmacro %}

{% macro pagination(pages) %}
  {% if pages|length > 0 %}
    <nav class="pagination">
      {% for page in pages %}
        {% if page.link is defined %}
          <a class="pagination__link" href="{{ page.link }}">{{ page.title }}</a>
        {% else %}
          <span class="pagination__link  {{ 'current' in page.class ? 'pagination__link--current' }} {{ 'dots' in page.class ? 'pagination__link--placeholder' }}">{{ page.title }}</span>
        {% endif %}
      {% endfor %}
    </nav>
  {% endif %}
{% endmacro %}

{% macro topic(topic, sticky = false) %}
  {% from _self import pagination, icon %}

  <article class="forum-short forum-short--{{ topic.post_status }} {{ topic.is_sticky ? 'forum-short--sticky' }} {{ topic.is_super_sticky ? 'forum-short--super-sticky' }}">
    {% if sticky and topic.is_super_sticky %}
      <div class="forum-short__image forum-short__image--fake">{{ icon('super-sticky') }}</div>
    {% elseif sticky and topic.is_sticky %}
      <div class="forum-short__image forum-short__image--fake">{{ icon('sticky') }}</div>
    {% elseif topic.post_status == 'closed' %}
      <div class="forum-short__image forum-short__image--fake">{{ icon('closed') }}</div>
    {% else %}
      {{ topic.author_avatar }}
    {% endif %}
    <h2 class="forum-short__title">
      <a href="{{ topic.link }}">{{ topic.title }}</a>
      <small>
        {{ __('started by', 'huskies') }}
        {{ topic.author }}
        {{ pagination(topic.pagination) }}
      </small>
    </h2>
    <p class="forum-short__meta">
      {{ icon('replies') }}
      {{ topic.reply_count }}
      |
      {{ icon('update') }}
      {{ topic.freshness_time }}
      <span class="forum-short__admin-links">{{ topic.admin_links }}</span>
    </p >
  </article>
{% endmacro %}
